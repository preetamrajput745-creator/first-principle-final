[
    {
        "id": null,
        "uid": "pnl_main",
        "title": "PnL & Slippage Control Panel",
        "timezone": "browser",
        "panels": [
            {
                "title": "Slippage Delta High (Warning/Critical)",
                "type": "stat",
                "targets": [
                    {
                        "expr": "avg_over_time(trade_slippage_pct[1h]) / on(instrument) profile_slippage"
                    }
                ],
                "fieldConfig": {
                    "defaults": {
                        "thresholds": {
                            "steps": [
                                {
                                    "value": 0,
                                    "color": "green"
                                },
                                {
                                    "value": 1.5,
                                    "color": "orange"
                                },
                                {
                                    "value": 2.0,
                                    "color": "red"
                                }
                            ]
                        }
                    }
                }
            },
            {
                "title": "Simulated vs Realized PnL (Cumulative)",
                "type": "graph",
                "targets": [
                    {
                        "expr": "simulated_pnl_total",
                        "legendFormat": "Simulated {{instrument}}"
                    },
                    {
                        "expr": "realized_pnl_total",
                        "legendFormat": "Realized {{instrument}}"
                    }
                ]
            },
            {
                "title": "Rolling Avg Slippage (10, 50, 24h)",
                "type": "timeseries",
                "targets": [
                    {
                        "expr": "avg_over_time(trade_slippage_pct[10m])",
                        "legendFormat": "Last 10m"
                    },
                    {
                        "expr": "avg_over_time(trade_slippage_pct[50m])",
                        "legendFormat": "Last 50m"
                    },
                    {
                        "expr": "avg_over_time(trade_slippage_pct[24h])",
                        "legendFormat": "Last 24h"
                    }
                ]
            },
            {
                "title": "Slippage Distribution",
                "type": "histogram",
                "targets": [
                    {
                        "expr": "sum(rate(trade_slippage_bucket[5m])) by (le, instrument)"
                    }
                ]
            },
            {
                "title": "Recent Trades Table (Verification Validated)",
                "type": "table",
                "targets": [
                    {
                        "expr": "recent_trades_info"
                    }
                ],
                "transformations": [
                    {
                        "id": "organize",
                        "options": {
                            "excludeByName": {}
                        }
                    }
                ]
            }
        ],
        "refresh": "5s"
    }
]